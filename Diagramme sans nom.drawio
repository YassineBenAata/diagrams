<mxfile host="app.diagrams.net" modified="2023-04-05T16:55:47.654Z" agent="Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:109.0) Gecko/20100101 Firefox/111.0" etag="CbUvx7uqvZgCp3GFRxUx" version="21.1.4" type="github">
  <diagram name="Page-1" id="fk9rbdVK4m5I_ALst2UT">
    <mxGraphModel dx="2193" dy="1736" grid="0" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="0" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="I3FUIYHm-plFTADxBa1i-1" value="dtm_ni_corporate_credits" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-39" y="92" width="160" height="66" as="geometry" />
        </mxCell>
        <mxCell id="H9Tu-maiYCN29PMUfYHM-1" value="&lt;h1&gt;Snapshot of NI DATAMART&lt;/h1&gt;&lt;div&gt;libname YIDEFAUT &quot;d:\Inbox\GrantThornton_Quantylix\0.DEFAUT\DATA\1.Corporate&quot;;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;" style="text;html=1;strokeColor=none;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="-473" y="-57" width="357" height="98" as="geometry" />
        </mxCell>
        <mxCell id="H9Tu-maiYCN29PMUfYHM-2" value="&lt;div&gt;/************************************************** Préparation table crédit ****************************************/&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: rgb(153, 255, 51);&quot;&gt;4 783 884&amp;nbsp; &lt;/span&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;ENCOURS &amp;gt;100&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: rgb(153, 255, 51);&quot;&gt;4 504 729&lt;/span&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;" style="text;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-720" y="103" width="596" height="182" as="geometry" />
        </mxCell>
        <mxCell id="H9Tu-maiYCN29PMUfYHM-4" value="&lt;div&gt;/* Imputation de l&#39;arrété 01/2017 par l&#39;arrêté 12/2016 afin d&#39;avoir les arrétés mensuelles sur toute la période à partir du 31/12/2016 */&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: rgb(153, 255, 51);&quot;&gt;4 504 729&lt;/span&gt;&lt;/div&gt;&lt;div&gt;data ybarrete_2016 ;&lt;/div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;set ybcredit_corpo (where=(DATEARRETE=&quot;31dec2016:00:00:00&quot;dt));&lt;br&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;DATEARRETE=&quot;31JAN2017:00:00:00&quot;dt;&lt;br&gt;&lt;div&gt;run;&lt;/div&gt;&lt;br&gt;&lt;div&gt;&lt;span style=&quot;background-color: rgb(153, 255, 51);&quot;&gt;45 687&lt;/span&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;data YODEFAUT.ybcorpo_credit (where=(DATEARRETE&amp;gt;=&quot;31dec2016:00:00:00&quot;dt));&lt;br&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;set ybcredit_corpo ybarrete_2016;&lt;br&gt;&lt;div&gt;run;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: rgb(153, 255, 51);&quot;&gt;4 514 512&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;table width=&quot;80&quot; cellspacing=&quot;0&quot; cellpadding=&quot;0&quot; border=&quot;0&quot;&gt;&lt;tbody&gt;&lt;tr height=&quot;20&quot;&gt;&lt;td class=&quot;xl65&quot; width=&quot;80&quot; height=&quot;20&quot; align=&quot;right&quot;&gt;&lt;br&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;br&gt;&lt;table width=&quot;80&quot; cellspacing=&quot;0&quot; cellpadding=&quot;0&quot; border=&quot;0&quot;&gt;&lt;tbody&gt;&lt;tr height=&quot;20&quot;&gt;&lt;td class=&quot;xl63&quot; width=&quot;80&quot; height=&quot;20&quot; align=&quot;right&quot;&gt;&lt;br&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;" style="text;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-713" y="340" width="610" height="291" as="geometry" />
        </mxCell>
        <mxCell id="H9Tu-maiYCN29PMUfYHM-6" value="ybcredit_corpo" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-19" y="294" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="H9Tu-maiYCN29PMUfYHM-10" value="ybarrete_2016" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="44" y="406" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="H9Tu-maiYCN29PMUfYHM-11" value="ybcorpo_credit" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-25" y="519" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="H9Tu-maiYCN29PMUfYHM-12" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="I3FUIYHm-plFTADxBa1i-1" target="H9Tu-maiYCN29PMUfYHM-6">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-160" y="537" as="sourcePoint" />
            <mxPoint x="-13" y="435" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="H9Tu-maiYCN29PMUfYHM-13" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.25;entryY=0;entryDx=0;entryDy=0;exitX=0.25;exitY=1;exitDx=0;exitDy=0;" edge="1" parent="1" source="H9Tu-maiYCN29PMUfYHM-6" target="H9Tu-maiYCN29PMUfYHM-11">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="51" y="195" as="sourcePoint" />
            <mxPoint x="51" y="331" as="targetPoint" />
            <Array as="points" />
          </mxGeometry>
        </mxCell>
        <mxCell id="H9Tu-maiYCN29PMUfYHM-14" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;exitX=1;exitY=1;exitDx=0;exitDy=0;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="82" y="354" as="sourcePoint" />
            <mxPoint x="85.00000000000023" y="406" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="H9Tu-maiYCN29PMUfYHM-15" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.333;exitY=1.107;exitDx=0;exitDy=0;exitPerimeter=0;" edge="1" parent="1" source="H9Tu-maiYCN29PMUfYHM-10">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-160" y="537" as="sourcePoint" />
            <mxPoint x="87" y="518" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="H9Tu-maiYCN29PMUfYHM-17" value="&lt;h1&gt;MACRO VARIABLES&lt;br&gt;&lt;/h1&gt;&lt;div&gt;&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;" style="text;html=1;strokeColor=none;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="603" y="30" width="244" height="34" as="geometry" />
        </mxCell>
        <mxCell id="H9Tu-maiYCN29PMUfYHM-18" value="ybcredit_corpo" style="text;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="679.9957142857143" y="542.9957142857144" width="108" height="36" as="geometry" />
        </mxCell>
        <mxCell id="H9Tu-maiYCN29PMUfYHM-19" value="&lt;h1&gt;LIBRARY&lt;br&gt;&lt;/h1&gt;&lt;div&gt;&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;" style="text;html=1;strokeColor=none;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="383" y="33" width="121" height="34" as="geometry" />
        </mxCell>
        <mxCell id="H9Tu-maiYCN29PMUfYHM-20" value="YIDEFAUT" style="shape=document;whiteSpace=wrap;html=1;boundedLbl=1;" vertex="1" parent="1">
          <mxGeometry x="113" y="-71" width="120" height="80" as="geometry" />
        </mxCell>
        <mxCell id="H9Tu-maiYCN29PMUfYHM-22" value="YODEFAUT" style="shape=document;whiteSpace=wrap;html=1;boundedLbl=1;" vertex="1" parent="1">
          <mxGeometry x="394" y="509" width="120" height="80" as="geometry" />
        </mxCell>
        <mxCell id="H9Tu-maiYCN29PMUfYHM-23" value="ybcredit_clients" style="text;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="679.9985714285716" y="627.9957142857145" width="113" height="36" as="geometry" />
        </mxCell>
        <mxCell id="H9Tu-maiYCN29PMUfYHM-24" value="&lt;div&gt;/***************************************************** Credit fonct ****************************************************/&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;/*Extraction des lignes de crédits de fonctionnement et ajout du flag Agri/Agro */&lt;br&gt;&lt;div&gt;&lt;span style=&quot;background-color: rgb(153, 255, 51);&quot;&gt;4 514 512&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;proc sql;&lt;br&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;create table ybcredit_corpo_fonctionnement as&lt;br&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;select A.* , B.flagagriagro&lt;br&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;from &amp;amp;ybcredit_corpo as A&lt;br&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;left join (select distinct idtiers, flagagriagro from &amp;amp;ybcredit_clients) as B &lt;br&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;on A.idtiers=B.idtiers&lt;br&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;where A.&lt;span style=&quot;background-color: rgb(255, 255, 51);&quot;&gt;naturecredit in (&#39;ESCOMPTE&#39;,&#39;ACNE&#39;,&#39;PREFI&#39;,&#39;DECOUVERT&#39;,&#39;AUTRES DEBITS&#39;,&lt;br&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;&#39;CCT&#39;,&#39;ASM&#39;, &#39;REFINACEMENT EN DEVISE&#39;,&#39;PREFIANCEMENT EN DEVISE&#39;,&#39;MCNE&#39;,&#39;AVANCE SUR FDA&#39;);&lt;/span&gt;&lt;br&gt;quit; &lt;span style=&quot;background-color: rgb(0, 0, 0);&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: rgb(0, 0, 0);&quot;&gt;&lt;span style=&quot;background-color: rgb(153, 255, 51);&quot;&gt;3 765 957&lt;/span&gt;&lt;/span&gt;&amp;nbsp; (filtre dur les natures credits fonctiuonemnt )&lt;br&gt;&lt;/div&gt;" style="text;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-713" y="616" width="605" height="205" as="geometry" />
        </mxCell>
        <mxCell id="H9Tu-maiYCN29PMUfYHM-26" value="" style="endArrow=none;dashed=1;html=1;rounded=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;" edge="1" parent="1" source="I3FUIYHm-plFTADxBa1i-1" target="H9Tu-maiYCN29PMUfYHM-20">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="280" y="420" as="sourcePoint" />
            <mxPoint x="330" y="370" as="targetPoint" />
            <Array as="points">
              <mxPoint x="115" y="34" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="H9Tu-maiYCN29PMUfYHM-27" value="" style="endArrow=none;dashed=1;html=1;rounded=0;entryX=0.989;entryY=0.892;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" target="H9Tu-maiYCN29PMUfYHM-20">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="245" y="632" as="sourcePoint" />
            <mxPoint x="330" y="370" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="H9Tu-maiYCN29PMUfYHM-28" value="dtm_ni_corporate_client" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="175" y="610" width="158" height="60" as="geometry" />
        </mxCell>
        <mxCell id="H9Tu-maiYCN29PMUfYHM-30" value="&lt;div&gt;all&lt;/div&gt;&lt;div&gt;(left join&lt;/div&gt;&lt;div&gt;)&lt;br&gt;&lt;/div&gt;" style="endArrow=classic;html=1;rounded=0;entryX=0.25;entryY=0;entryDx=0;entryDy=0;exitX=0.65;exitY=1;exitDx=0;exitDy=0;exitPerimeter=0;" edge="1" parent="1" source="H9Tu-maiYCN29PMUfYHM-11" target="H9Tu-maiYCN29PMUfYHM-31">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="37" y="595" as="sourcePoint" />
            <mxPoint x="31" y="593" as="targetPoint" />
            <Array as="points" />
          </mxGeometry>
        </mxCell>
        <mxCell id="H9Tu-maiYCN29PMUfYHM-31" value="ybcredit_corpo_fonctionnement" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="8" y="771" width="180" height="60" as="geometry" />
        </mxCell>
        <mxCell id="H9Tu-maiYCN29PMUfYHM-34" value="&lt;div&gt;FLAG AGRI AGRO&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;" style="endArrow=classic;html=1;rounded=0;entryX=1;entryY=0;entryDx=0;entryDy=0;exitX=0.25;exitY=1;exitDx=0;exitDy=0;" edge="1" parent="1" source="H9Tu-maiYCN29PMUfYHM-28" target="H9Tu-maiYCN29PMUfYHM-31">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="63" y="589" as="sourcePoint" />
            <mxPoint x="63" y="781" as="targetPoint" />
            <Array as="points" />
          </mxGeometry>
        </mxCell>
        <mxCell id="H9Tu-maiYCN29PMUfYHM-35" value="" style="endArrow=none;dashed=1;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="H9Tu-maiYCN29PMUfYHM-11" target="H9Tu-maiYCN29PMUfYHM-22">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="375" y="670" as="sourcePoint" />
            <mxPoint x="425" y="620" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="H9Tu-maiYCN29PMUfYHM-37" value="date_echeance=datefin" style="endArrow=classic;html=1;rounded=0;exitX=0.65;exitY=1;exitDx=0;exitDy=0;exitPerimeter=0;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="54" y="831" as="sourcePoint" />
            <mxPoint x="58" y="994" as="targetPoint" />
            <Array as="points" />
          </mxGeometry>
        </mxCell>
        <mxCell id="H9Tu-maiYCN29PMUfYHM-38" value="/* Ajout de la variable date d’échéance pour les découverts: max entre date fin de la ligdne et date u dernier dépassement,&lt;br&gt;car la date du dernier dépassement nous indique si il y&#39; a eu renouvellement de la ligne ou pas */&lt;br&gt;&lt;br&gt;data ybcredit_corpo_fonctionnement1;&lt;br&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;set ybcredit_corpo_fonctionnement;&lt;br&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;format date_echeance datetime20.;&lt;br&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;date_echeance=datefin ;&lt;br&gt;&lt;div&gt;run;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: rgb(153, 255, 51);&quot;&gt;3 765 957&lt;/span&gt;&lt;/div&gt;" style="text;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-709" y="853" width="625" height="166" as="geometry" />
        </mxCell>
        <mxCell id="H9Tu-maiYCN29PMUfYHM-39" value="ybcredit_corpo_fonctionnement1" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-7" y="993" width="195" height="60" as="geometry" />
        </mxCell>
        <mxCell id="H9Tu-maiYCN29PMUfYHM-42" value="" style="line;strokeWidth=4;html=1;perimeter=backbonePerimeter;points=[];outlineConnect=0;" vertex="1" parent="1">
          <mxGeometry x="-702" y="603" width="580" height="10" as="geometry" />
        </mxCell>
        <mxCell id="H9Tu-maiYCN29PMUfYHM-43" value="/* Creation de la table crédit de fonctionnement corporate agri*/&lt;br&gt;&lt;br&gt;proc sql;&lt;br&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;create table YODEFAUT.credit_corpo_fonct_agri as&lt;br&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;select *&lt;br&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;from credit_corpo_fonctionnement1&lt;br&gt;&lt;span style=&quot;background-color: rgb(255, 255, 51);&quot;&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;where flagagriagro = &#39;O&#39;;&lt;/span&gt;&lt;br&gt;quit;&lt;br&gt;&lt;div&gt;&lt;span style=&quot;background-color: rgb(153, 255, 51);&quot;&gt;778 988&lt;/span&gt;&lt;/div&gt;&lt;br&gt;/* Creation de la table crédit de fonctionnement corporate horsagri*/&lt;br&gt;&lt;br&gt;proc sql;&lt;br&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;create table YODEFAUT.credit_corpo_fonct_horsagri as&lt;br&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;select *&lt;br&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;from credit_corpo_fonctionnement1&lt;br&gt;&lt;span style=&quot;background-color: rgb(255, 255, 51);&quot;&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;where flagagriagro = &#39;N&#39;;&lt;/span&gt;&lt;br&gt;&lt;div&gt;quit;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: rgb(153, 255, 51);&quot;&gt;2 986 713&lt;/span&gt;&lt;br&gt;&lt;/div&gt;" style="text;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-732.5" y="1051" width="621" height="303" as="geometry" />
        </mxCell>
        <mxCell id="H9Tu-maiYCN29PMUfYHM-44" value="ybcredit_corpo_fonct_agri" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="9" y="1205" width="163" height="60" as="geometry" />
        </mxCell>
        <mxCell id="H9Tu-maiYCN29PMUfYHM-45" value="ybcredit_corpo_fonct_agri" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="205" y="1208.5" width="163" height="60" as="geometry" />
        </mxCell>
        <mxCell id="H9Tu-maiYCN29PMUfYHM-46" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.391;exitY=1;exitDx=0;exitDy=0;exitPerimeter=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="H9Tu-maiYCN29PMUfYHM-39" target="H9Tu-maiYCN29PMUfYHM-44">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="44" y="1053" as="sourcePoint" />
            <mxPoint x="38" y="1211" as="targetPoint" />
            <Array as="points" />
          </mxGeometry>
        </mxCell>
        <mxCell id="H9Tu-maiYCN29PMUfYHM-47" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.25;exitY=1;exitDx=0;exitDy=0;" edge="1" parent="1" target="H9Tu-maiYCN29PMUfYHM-45">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="121" y="1050.5" as="sourcePoint" />
            <mxPoint x="115" y="1208.5" as="targetPoint" />
            <Array as="points" />
          </mxGeometry>
        </mxCell>
        <mxCell id="H9Tu-maiYCN29PMUfYHM-48" value="" style="endArrow=none;dashed=1;html=1;rounded=0;entryX=0.857;entryY=0.775;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="H9Tu-maiYCN29PMUfYHM-45" target="H9Tu-maiYCN29PMUfYHM-22">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="105" y="559" as="sourcePoint" />
            <mxPoint x="404" y="559" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="H9Tu-maiYCN29PMUfYHM-49" value="" style="endArrow=none;dashed=1;html=1;rounded=0;entryX=0.607;entryY=0.829;entryDx=0;entryDy=0;entryPerimeter=0;exitX=0.826;exitY=-0.03;exitDx=0;exitDy=0;exitPerimeter=0;" edge="1" parent="1" source="H9Tu-maiYCN29PMUfYHM-44" target="H9Tu-maiYCN29PMUfYHM-22">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="261" y="1219" as="sourcePoint" />
            <mxPoint x="507" y="581" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="H9Tu-maiYCN29PMUfYHM-50" value="&lt;div&gt;/***************************************************** Credit Amort&amp;nbsp; ****************************************************/&lt;/div&gt;&lt;div&gt;roc delete lib=work data=_all_; run;&lt;/div&gt;&lt;div&gt;/*Extraction des lignes de crédits amortissables et ajout du flag Agri/Agro */&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;proc sql;&lt;br&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;create table YODEFAUT.ybcredit_corpo_amortissable as&lt;br&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;select A.* , &quot;Corporate&quot; as TYPE_CLIENT, &quot;&quot; as TYPE_PERSONNE , B.flagagriagro&lt;br&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;from &amp;amp;ybcredit_corpo as A&lt;br&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;left join (select distinct idtiers, flagagriagro from &amp;amp;ybcredit_clients) as B &lt;br&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;on A.idtiers=B.idtiers&lt;br&gt;&lt;span style=&quot;background-color: rgb(255, 255, 51);&quot;&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;where A.naturecredit in (&#39;CREDITS AMORTISSABLES&#39;, &#39;CREDITS A LA CONSOMATION (WS)&#39;); &lt;/span&gt;&lt;br&gt;quit;&amp;nbsp; /* ! Attention aux duplications et au champ &quot;TYPE_PERSONNE&quot; pour les retails */&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: rgb(153, 255, 51);&quot;&gt;266 591 (filtre&amp;nbsp; sur les nature credits amortissables)&lt;br&gt;&lt;/span&gt;&lt;/div&gt;" style="text;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-731" y="1388.86" width="640" height="204.14" as="geometry" />
        </mxCell>
        <mxCell id="H9Tu-maiYCN29PMUfYHM-51" value="" style="line;strokeWidth=4;html=1;perimeter=backbonePerimeter;points=[];outlineConnect=0;" vertex="1" parent="1">
          <mxGeometry x="-728" y="1367" width="610" height="10" as="geometry" />
        </mxCell>
        <mxCell id="H9Tu-maiYCN29PMUfYHM-52" value="&lt;div&gt;all&lt;/div&gt;&lt;div&gt;(left join&lt;/div&gt;&lt;div&gt;)&lt;br&gt;&lt;/div&gt;" style="endArrow=classic;html=1;rounded=0;exitX=0.65;exitY=1;exitDx=0;exitDy=0;exitPerimeter=0;entryX=0.25;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" target="H9Tu-maiYCN29PMUfYHM-57">
          <mxGeometry x="0.0155" width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-13" y="582" as="sourcePoint" />
            <mxPoint x="-18" y="1445" as="targetPoint" />
            <Array as="points">
              <mxPoint x="-60" y="1020" />
            </Array>
            <mxPoint y="1" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="H9Tu-maiYCN29PMUfYHM-53" value="&lt;div&gt;FLAG AGRI AGRO&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;" style="endArrow=classic;html=1;rounded=0;entryX=0.75;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" target="H9Tu-maiYCN29PMUfYHM-57">
          <mxGeometry x="0.0748" y="7" width="50" height="50" relative="1" as="geometry">
            <mxPoint x="311" y="674" as="sourcePoint" />
            <mxPoint x="113" y="1451" as="targetPoint" />
            <Array as="points">
              <mxPoint x="558" y="1202" />
            </Array>
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="H9Tu-maiYCN29PMUfYHM-54" value="&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="H9Tu-maiYCN29PMUfYHM-53">
          <mxGeometry x="-0.0118" y="2" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="H9Tu-maiYCN29PMUfYHM-57" value="ybcredit_corpo_amortissable" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-36" y="1466" width="188" height="60" as="geometry" />
        </mxCell>
        <mxCell id="H9Tu-maiYCN29PMUfYHM-58" value="/* Creation de la table crédit amortissable corporate agri*/&lt;br&gt;proc sql;&lt;br&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;create table YODEFAUT.ybcredit_corpo_amort_agri as&lt;br&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;select *&lt;br&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;from YODEFAUT.ybcredit_corpo_amortissable&lt;br&gt;&lt;span style=&quot;background-color: rgb(255, 255, 51);&quot;&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;where type_client=&#39;Corporate&#39; and flagagriagro = &#39;O&#39;;&lt;/span&gt;&lt;br&gt;quit;&lt;br&gt;&lt;div&gt;&lt;span style=&quot;background-color: rgb(153, 255, 51);&quot;&gt;150182&lt;/span&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;/* Creation de la table crédit amortissable corporate hors-agri*/&lt;br&gt;proc sql;&lt;br&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;create table YODEFAUT.ybcredit_corpo_amort_horsagri as&lt;br&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;select *&lt;br&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;from YODEFAUT.ybcredit_corpo_amortissable&lt;br&gt;&lt;span style=&quot;background-color: rgb(255, 255, 51);&quot;&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;where type_client=&#39;Corporate&#39; and flagagriagro = &#39;N&#39;;&lt;/span&gt;&lt;br&gt;&lt;div&gt;quit;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: rgb(153, 255, 51);&quot;&gt;116 358&lt;/span&gt;&lt;br&gt;&lt;/div&gt;" style="text;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-732.5" y="1669" width="653" height="252" as="geometry" />
        </mxCell>
        <mxCell id="H9Tu-maiYCN29PMUfYHM-59" value="ybcredit_corpo_fonct_agri" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-9" y="1744" width="163" height="60" as="geometry" />
        </mxCell>
        <mxCell id="H9Tu-maiYCN29PMUfYHM-60" value="ybcredit_corpo_fonct_agri" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="170" y="1746" width="163" height="60" as="geometry" />
        </mxCell>
        <mxCell id="H9Tu-maiYCN29PMUfYHM-61" value="" style="endArrow=classic;html=1;rounded=0;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="47" y="1529" as="sourcePoint" />
            <mxPoint x="43" y="1750" as="targetPoint" />
            <Array as="points" />
          </mxGeometry>
        </mxCell>
        <mxCell id="H9Tu-maiYCN29PMUfYHM-63" value="" style="endArrow=classic;html=1;rounded=0;" edge="1" parent="1" target="H9Tu-maiYCN29PMUfYHM-60">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="104" y="1527" as="sourcePoint" />
            <mxPoint x="179" y="1792" as="targetPoint" />
            <Array as="points" />
          </mxGeometry>
        </mxCell>
        <mxCell id="H9Tu-maiYCN29PMUfYHM-65" value="" style="line;strokeWidth=4;html=1;perimeter=backbonePerimeter;points=[];outlineConnect=0;" vertex="1" parent="1">
          <mxGeometry x="-728" y="1941" width="610" height="10" as="geometry" />
        </mxCell>
        <mxCell id="H9Tu-maiYCN29PMUfYHM-66" value="&lt;div&gt;/***************************************************** Table Impayes&amp;nbsp; ****************************************************/&lt;/div&gt;&lt;div&gt;proc delete lib=work data=_all_; run;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;/* Préparation et stockage de la table des impayes */&lt;br&gt;&lt;br&gt;%let mise_impaye&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; =YIDEFAUT. dtm_ni_mise_en_impaye;&lt;br&gt;%let reglement_impaye&amp;nbsp;&amp;nbsp; &amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;=YIDEFAUT. dtm_ni_reglement_impaye;&lt;br&gt;%let credits_amortissables&amp;nbsp; =YODEFAUT.ybcredit_corpo_amortissable;&lt;br&gt;&lt;br&gt;%IMPAYES_CORPORATE(&amp;amp;mise_impaye, &amp;amp;reglement_impaye, &amp;amp;credits_amortissables)&lt;br&gt;&lt;br&gt;data YODEFAUT.ybIMPAYES_CORPORATE;&lt;br&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;set ybIMPAYES_CORPORATE;&lt;br&gt;run;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;" style="text;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-725" y="1964" width="639" height="266" as="geometry" />
        </mxCell>
        <mxCell id="H9Tu-maiYCN29PMUfYHM-67" value="" style="endArrow=none;dashed=1;html=1;rounded=0;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="547" y="1831" as="sourcePoint" />
            <mxPoint x="238" y="10" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="H9Tu-maiYCN29PMUfYHM-69" value="" style="endArrow=none;dashed=1;html=1;rounded=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;" edge="1" parent="1" source="H9Tu-maiYCN29PMUfYHM-72">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="447" y="1987" as="sourcePoint" />
            <mxPoint x="546" y="1832" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="H9Tu-maiYCN29PMUfYHM-70" value="" style="endArrow=none;dashed=1;html=1;rounded=0;" edge="1" parent="1" source="H9Tu-maiYCN29PMUfYHM-75">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="610" y="1980" as="sourcePoint" />
            <mxPoint x="547" y="1833" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="H9Tu-maiYCN29PMUfYHM-72" value="&#xa;dtm_ni_mise_en_impaye&#xa;&#xa;" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="333" y="1988" width="155" height="60" as="geometry" />
        </mxCell>
        <mxCell id="H9Tu-maiYCN29PMUfYHM-75" value="dtm_ni_reglement_impaye" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="547" y="1988" width="170" height="60" as="geometry" />
        </mxCell>
        <mxCell id="H9Tu-maiYCN29PMUfYHM-77" value="" style="endArrow=classic;html=1;rounded=0;exitX=0;exitY=1;exitDx=0;exitDy=0;" edge="1" parent="1" source="H9Tu-maiYCN29PMUfYHM-57">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="73" y="1713" as="sourcePoint" />
            <mxPoint x="-28" y="1980" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="H9Tu-maiYCN29PMUfYHM-78" value="&#xa;dtm_ni_mise_en_impaye&#xa;&#xa;" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-57" y="1978" width="155" height="60" as="geometry" />
        </mxCell>
        <mxCell id="H9Tu-maiYCN29PMUfYHM-80" value="ybmise_impaye" style="text;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="912.5714285714289" y="1886.571428571429" width="115" height="36" as="geometry" />
        </mxCell>
        <mxCell id="H9Tu-maiYCN29PMUfYHM-81" value="ybreglement_impaye" style="text;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="912.5728571428574" y="1927.9985714285715" width="143" height="36" as="geometry" />
        </mxCell>
        <mxCell id="H9Tu-maiYCN29PMUfYHM-82" value="ybcredits_amortissables" style="text;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="912.5733333333335" y="1965.0033333333336" width="164" height="36" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
